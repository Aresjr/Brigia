<div class="flex min-h-screen bg-background">
  <aside class="h-screen sticky top-0 w-56">
    <nav class="h-full flex flex-col bg-gray-50 w-56 border-r">
      <div class="p-4 pb-2">
        <div class="flex items-center mb-4">
          <div class="flex items-center">
            <img src="images/logo-sidebar.png" alt="Logo" class="h-10 object-contain" />
          </div>
        </div>
        <div class="flex-1 relative">
          <lucide-icon name="search" class="w-4 h-4 absolute left-1 top-1/2 transform -translate-y-1/2 text-muted-foreground"></lucide-icon>
          <input [(ngModel)]="searchTerm" (input)="onSearchChange()" class="flex w-full rounded-md border px-3 py-2 h-8 pl-9 text-sm" placeholder="Pesquisar" />
        </div>
      </div>
      <div class="shrink-0 bg-border h-[1px] w-full"></div>
      <div class="flex-1 overflow-y-auto">
        <ul class="px-2">
          <li *ngFor="let item of this.filteredMenuItems">
            <app-menu-item
              [label]="item.label"
              [icon]="item.icon"
              [route]="item.route"
              [hasSubmenu]="item.hasSubmenu"
              [submenuOpen]="isSubmenuOpen(item.label)"
              (clicked)="toggleSubmenu(item.label)">
            </app-menu-item>
            <div *ngIf="item.children"
              class="overflow-hidden ease-in-out"
              [class.max-h-0]="!isSubmenuOpen(item.label)"
              [class.max-h-48]="isSubmenuOpen(item.label)">
              <ul class="pl-4">
                <li *ngFor="let child of item.children">
                  <app-menu-item
                    [label]="child.label"
                    [icon]="child.icon"
                    [route]="child.route">
                  </app-menu-item>
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </div>
      <div class="border-t border-border p-3 relative">
        <button
          (click)="toggleUserMenu()"
          class="inline-flex items-center rounded-md text-sm h-10 px-4 py-2 w-full justify-start hover:bg-accent">
          <span class="relative flex shrink-0 overflow-hidden rounded-full h-6 w-6">
            <span class="flex h-full w-full items-center justify-center rounded-full bg-muted">
              <lucide-icon name="circle-user" class="w-4 h-4 mr-2"></lucide-icon>
            </span>
          </span>
          <span class="ml-2">{{loggedUserName}}</span>
        </button>
        <div *ngIf="isUserMenuOpen" class="absolute w-40 bottom-full mb-1 bg-white rounded-md shadow-lg border border-gray-200">
          <ul class="py-1">
            <li>
              <a href="/logout" class="block px-4 py-2 text-sm text-red-700 hover:bg-red-50 cursor-pointer">
                Sair
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  </aside>
  <div class="flex-1 px-8 pb-4 bg-gray-200">
    <div class="space-y-4 relative">
      <div class="space-y-8">
        <router-outlet></router-outlet>
      </div>
    </div>
  </div>
</div>
