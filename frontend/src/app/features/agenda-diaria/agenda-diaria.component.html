<div class="mt-4">

  <app-top-bar title="Agenda DiÃ¡ria" [showSearchBar]=false (search)="onSearch($event)" ></app-top-bar>

  <div class="flex justify-end gap-4 mb-6 flex-wrap">
    <div></div>

    <div class="flex gap-4">
      <ng-select *ngIf="!this.userService.isMedico()" class="w-72 shadow-md hover:shadow-lg h-8 max-h-8 leading-none"
                 (change)="selectProfissional($event)" placeholder="Todos os Profissionais - Selecione">
        <ng-option class="max-h-8" value="0">Todos os Profissionais - Selecione</ng-option>
        @for(profissional of this.profissionais; track profissional.id) {
          <ng-option class="max-h-8" value="{{ profissional.id }}">{{ profissional.nome }}</ng-option>
        }
        <ng-template ng-notfound-tmp>
          <span class="text-sm p-6">Nenhum resultado</span>
        </ng-template>
      </ng-select>

      <ng-select class="w-72 shadow-md hover:shadow-lg h-8 max-h-8 leading-none"
                 (change)="selectPaciente($event)" placeholder="Todos os Pacientes - Selecione">
        <ng-option class="max-h-8" value="0">Todos os Pacientes - Selecione</ng-option>
        @for(paciente of this.pacientes; track paciente.id) {
          <ng-option class="max-h-8" value="{{ paciente.id }}">{{ paciente.nome }}</ng-option>
        }
        <ng-template ng-notfound-tmp>
          <span class="text-sm p-6">Nenhum resultado</span>
        </ng-template>
      </ng-select>
    </div>
  </div>

<app-calendario
  class="z-10"
  [events]="eventosExibicao"
  [isLoading]="isLoading"
  (detalhesAgendamento)="detalhesAgendamento($event)"
  (diaClicado)="diaClicado($event)"
  (horarioClicado)="horarioClicado($event)"
  (dataAlterada)="dataAlterada($event)"
  (recarrega)="carregarAgendamentos()">
</app-calendario>

@if (exibeForm) {
  <app-agendamento-form
    [agendamentoDetalhes]="agendamentoDetalhes"
    [dataAgendamento]="dataAgendamento"
    [pacienteId]="pacienteId"
    (save)="salvar($event)"
    (cancel)="fecharForm()">
  </app-agendamento-form>
}

@if (mostraFab()) {
  <app-fab (clicked)="onAddNovo()" class="fixed bottom-6 right-6 z-50"></app-fab>
}

</div>
